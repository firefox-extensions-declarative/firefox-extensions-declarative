# This file was autogenerated by actions.nix. Do not edit it manually.
# To make changes, edit the workflow definition in your flake's actions-nix configuration
# (typically under flake.actions-nix.workflows.".github/workflows/push-doc-site.yaml") and run:
#   nix run .#render-workflows
# Or commit to trigger the pre-commit hook if enabled.
jobs:
  push-doc-site:
    name: Push docs site
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: determinatesystems/nix-installer-action@v20
      with:
        determinate: false
        diagnostic-endpoint: ''
        logger: pretty
        source-url: https://install.lix.systems/lix/lix-installer-x86_64-linux
    - uses: DeterminateSystems/magic-nix-cache-action@main
      with:
        diagnostic-endpoint: ''
    - name: Build the docs website
      run: |-
        nix build .#docs
        mkdir result-copied
        cp -r result/* result-copied
        touch result-copied/.nojekyll
    - env:
        API_TOKEN_GITHUB: ${{ secrets.WEBSITE_DEPLOY }}
      name: Push the docs
      uses: cpina/github-action-push-to-another-repository@main
      with:
        commit-message: Generated docs from ORIGIN_COMMIT
        destination-github-username: firefox-extensions-declarative
        destination-repository-name: firefox-extensions-declarative.github.io
        source-directory: result-copied
    timeout-minutes: 60
name: Push docs site
'on':
  push:
    branches:
    - main
